{"version":3,"file":"common~gallery.f138cd2178434d61295c.js","mappings":"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","sources":["webpack://pero-travel-webpack/./src/js/gallery.js"],"sourcesContent":["'use strict';\r\n\r\nexport class Gallery {\r\n\r\n\tconstructor (selector) {\r\n\t\tthis.gallery = document.querySelector(selector);\r\n\t\tthis.galleryItems = Array.from(this.gallery.children);\r\n\t\tthis.galleryScroll = this.galleryScroll.bind(this);\r\n\t\tthis.pointerUp = this.pointerUp.bind(this);\r\n\r\n\t\tthis.cancelDraggable();\r\n\t\tthis.setGalleryScrollable();\r\n\t\tthis.galleryItems.forEach((item) => {\r\n\t\t\tif (item.classList.contains('clickable')) {\r\n\t\t\t\titem.addEventListener('click', showBigImg);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tcancelDraggable() {\r\n\t\tthis.gallery.ondragstart = () => {\r\n\t\t    return false;\r\n\t\t  };\r\n\t}\r\n\r\n\tsetGalleryScrollable() {\r\n\t\tthis.gallery.addEventListener('pointerdown', () => {\r\n\t\t\tthis.pageX = 0;\r\n\t\t\tdocument.addEventListener('pointermove', this.galleryScroll);\r\n\t\t\tdocument.addEventListener('pointerup', this.pointerUp);\r\n\t\t});\r\n\t}\r\n\r\n\tgalleryScroll(e) {\r\n\t\tif (this.pageX !== 0) {\r\n\t\t\tthis.gallery.scrollLeft = this.gallery.scrollLeft + (this.pageX - e.pageX);\r\n\r\n\t\t\tlet event = new Event(\"moving\", {bubbles: false});\r\n  \t\t\tthis.gallery.dispatchEvent(event);\r\n\r\n  \t\t\tthis.galleryItems.forEach((item) => {\r\n  \t\t\t\titem.style.pointerEvents = 'none';\r\n  \t\t\t});\r\n\t\t};\r\n\t\tthis.pageX = e.pageX;\r\n\t}\r\n\r\n\tpointerUp(e) {\r\n  \t\tthis.galleryItems.forEach((item) => {\r\n  \t\t\titem.style.pointerEvents = 'all';\r\n  \t\t});\r\n\t\tdocument.removeEventListener('pointermove', this.galleryScroll);\r\n\t\tdocument.removeEventListener('pointerup', this.pointerUp);\r\n\t}\r\n\r\n}\r\n\r\nexport class VideoGallery extends Gallery {\r\n\r\n\tconstructor(selector) {\r\n\t\tsuper(selector);\r\n\t\tthis.galleryItems = Array.from(this.gallery.children);\r\n\t\tthis.bigVideoClickHandler = this.bigVideoClickHandler.bind(this);\r\n\t\tthis.bigVideoPointerHandler = this.bigVideoPointerHandler.bind(this);\r\n\t\tthis.setItemsClickable();\r\n\t}\r\n\r\n\tsetItemsClickable() {\r\n\t\tthis.galleryItems.forEach((video) => {\r\n\t\t\tvideo.addEventListener('click', (e) => {\r\n\t\t\t\tif (event.which != 1) return;\r\n\t\t\t\tthis.setBigVideo(e);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tsetBigVideo(e) {\r\n\t\tthis.bigVideoContainer = document.getElementById('bigVideoContainer').content.cloneNode(true).firstElementChild;\r\n\t\tthis.bigVideoLayer = this.bigVideoContainer.querySelector('.video__layer');\r\n\t\tconst video = this.bigVideoContainer.querySelectorAll('.video__content')[0];\r\n\t\tconst videoSources = Array.from(video.children);\r\n\t\tconst url = e.currentTarget.dataset.id;\r\n\r\n\t\twhile (video.firstChild) {\r\n\t\t\tvideo.removeChild(video.firstChild);\r\n\t\t};\r\n\r\n\t\t[].forEach.call(videoSources, (source) => {\r\n\t\t\tsource.src = source.src.replace('/id.', `/${url}.`);\r\n\t\t\tvideo.appendChild(source);\r\n\t\t});\r\n\r\n\t\tthis.bigVideoContainer.addEventListener('click', this.bigVideoClickHandler);\r\n\t\tdocument.body.appendChild(this.bigVideoContainer);\r\n\t\tthis.getBigVideoPlay();\r\n\t}\r\n\r\n\tbigVideoClickHandler(e) {\r\n\t\tthis.bigVideo = this.bigVideoContainer.querySelector('.video__content');\r\n\t\t\tif (!e.target.closest('.video__layer')) {\r\n\t\t\t\tdocument.body.removeChild(this.bigVideoContainer);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.bigVideoContainer.classList.contains('playing')) {\r\n\t\t\t\t\tthis.bigVideo.pause();\r\n\t\t\t\t\tthis.bigVideoContainer.classList.remove('playing');\r\n\t\t\t\t\tthis.bigVideoContainer.classList.add('paused');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.bigVideo.play();\r\n\t\t\t\t\tthis.bigVideoContainer.classList.remove('paused');\r\n\t\t\t\t\tthis.bigVideoContainer.classList.add('playing');\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t}\r\n\r\n\tbigVideoPointerHandler() {\r\n\t\tif (this.bigVideoContainer.classList.contains('pointerMove')||this.bigVideoContainer.classList.contains('paused')) return;\r\n\t\tthis.bigVideoContainer.classList.add('pointerMove');\r\n\t\tlet timer = setTimeout(()=>{\r\n\t\t\tthis.bigVideoContainer.classList.remove('pointerMove');\r\n\t\t\tclearTimeout(timer);\r\n\t\t}, 700);\r\n\t}\r\n\r\n\tgetBigVideoPlay() {\r\n\t\tthis.bigVideo = this.bigVideoContainer.querySelector('.video__content');\r\n\t\tthis.bigVideo.play();\r\n\t\tthis.bigVideoContainer.classList.add('playing');\r\n\t\tthis.bigVideoLayer.addEventListener('pointermove', this.bigVideoPointerHandler);\r\n\t}\r\n\r\n}\r\n\r\nexport class GalleryWithControls extends Gallery {\r\n\r\n\tconstructor (selector) {\r\n\t\tsuper(selector);\r\n\t\tthis.galleryItemsLinks = Array.from(this.gallery.querySelectorAll('.popularTrip__link'));\r\n\r\n\t\tthis.createControls(selector);\r\n\t\tthis.gallery.after(this.controlsContainer);\r\n\r\n\t\tthis.btnPrev = this.gallery.parentNode.querySelector('.control__btn--prev');\r\n\t\tthis.btnNext = this.gallery.parentNode.querySelector('.control__btn--next');\r\n\t\tthis.progressbarPoiner = this.gallery.parentNode.querySelector('.control__progressbar__pointer');\r\n\r\n\t\tthis.setControlsState();\r\n\r\n\t\t[this.btnPrev, this.btnNext].forEach((btn) => {\r\n\t\t\tbtn.addEventListener('click', (e) => {\r\n\t\t\t\tthis.btnsClickHandler(e);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.gallery.addEventListener('moving', () => this.setControlsState());\r\n\t}\r\n\r\n\tcreateControls(selector) {\r\n\t\tlet svgNS = \"http://www.w3.org/2000/svg\";\r\n\t\tlet linkNS = \"http://www.w3.org/1999/xlink\";\r\n\r\n\t\tthis.controlsContainer = document.createElement('div');\r\n\t\tthis.controlsContainer.classList.add('d-flex', 'align-center', 'gallery__controls', `${selector.slice(1)}__controls`);\r\n\r\n\t\tlet btns = document.createElement('div');\r\n\t\tbtns.classList.add('gallery__controls__btns');\r\n\r\n\t\tlet btnPrev = document.createElementNS(svgNS, 'svg');\r\n\t\tbtnPrev.classList.add('gallery__controls__btns__btn', 'control__btn', 'control__btn--prev');\r\n\t\tlet btnPrevUse = document.createElementNS(svgNS, 'use');\r\n\t\tbtnPrevUse.setAttributeNS(linkNS, 'href', '#prev');\r\n\t\tbtnPrev.append(btnPrevUse);\r\n\r\n\t\tlet btnNext = document.createElementNS(svgNS, 'svg');\r\n\t\tbtnNext.classList.add('gallery__controls__btns__btn', 'control__btn', 'control__btn--next');\r\n\t\tlet btnNextUse = document.createElementNS(svgNS, 'use');\r\n\t\tbtnNextUse.setAttributeNS(linkNS, 'href', '#next');\r\n\t\tbtnNext.append(btnNextUse);\r\n\r\n\t\tbtns.append(btnPrev, btnNext);\r\n\r\n\t\tlet progressbar = document.createElement('div');\r\n\t\tprogressbar.classList.add('gallery__controls__progressbar', 'control__progressbar');\r\n\t\tlet progressbarPoiner = document.createElement('div');\r\n\t\tprogressbarPoiner.classList.add('control__progressbar__pointer');\r\n\t\tprogressbar.append(progressbarPoiner);\r\n\r\n\t\tthis.controlsContainer.append(btns, progressbar);\r\n\t}\r\n\r\n\tsetControlsState() {\r\n\t\t\r\n\t\tif (this.gallery.scrollLeft == 0) {\r\n\t\t\tthis.btnPrev.classList.remove('control__btn--active');\r\n\t\t\tthis.btnNext.classList.add('control__btn--active');\r\n\t\t} else if (this.gallery.scrollWidth-this.gallery.scrollLeft == this.gallery.offsetWidth) {\r\n\t\t\tthis.btnPrev.classList.add('control__btn--active');\r\n\t\t\tthis.btnNext.classList.remove('control__btn--active');\r\n\t\t} else {\r\n\t\t\tthis.btnPrev.classList.add('control__btn--active');\r\n\t\t\tthis.btnNext.classList.add('control__btn--active');\r\n\t\t};\r\n\r\n\t\tthis.progressbarPoiner.style.width = (this.gallery.offsetWidth+this.gallery.scrollLeft) / this.gallery.scrollWidth  * 100 + '%';\r\n\t}\r\n\r\n\tbtnsClickHandler(e) {\r\n\t\tif (!e.target.classList.contains('control__btn--active')) return;\r\n\r\n\t\tthis.galleryItemWidth = parseFloat(window.getComputedStyle(this.gallery.firstElementChild).width);\r\n\t\tthis.galleryItemMargin = parseFloat(window.getComputedStyle(this.gallery.firstElementChild).marginRight);\r\n\r\n\t\tlet shift = e.target.classList.contains('control__btn--prev') ? -this.galleryItemWidth-this.galleryItemMargin : this.galleryItemWidth+this.galleryItemMargin;\r\n\t\tthis.animateMoving(shift);\r\n\t}\r\n\r\n\tanimateMoving(step) {\r\n\t\t\r\n\t\tconst render = (progress) => {\r\n\t\t    this.gallery.scrollLeft = currentShift + step * progress; \r\n\t\t    this.setControlsState();\r\n\t\t};\r\n\r\n\t\tconst currentShift = this.gallery.scrollLeft;\r\n\t\tlet startTime = performance.now();\r\n\r\n\t    requestAnimationFrame(function animate(time) {\r\n\t    \tlet progress = (time - startTime) / 400;\r\n\t    \tif (progress > 1) progress = 1;\r\n\t    \tif (progress < 0) {\r\n\t    \t\trequestAnimationFrame(animate);\r\n\t    \t\treturn;\r\n\t    \t};\r\n\t    \trender(progress);\r\n\t    \tif (progress < 1) requestAnimationFrame(animate);\r\n\t    })\r\n\t}\r\n\r\n}\r\n\r\nfunction showBigImg(e) {\r\n\tconst scrollY = window.scrollY;\r\n\tconst img = e.target.querySelector('img');\r\n\tconst name = img.dataset.name;\r\n\r\n\tconst bigImg = img.cloneNode();\r\n\tlet imgSrcArr = img.src.split('/');\r\n\tbigImg.src = `img/${imgSrcArr[imgSrcArr.length-2]}/bigImg/${name}.webp`;\r\n\tbigImg.className = 'bigImg';\r\n\r\n\tconst layer = document.createElement('div');\r\n\tlayer.classList.add('layer');\r\n\r\n\tdocument.body.style.position = 'fixed';\r\n\tdocument.body.style.top = `-${scrollY}px`;\r\n\r\n\tdocument.body.appendChild(layer);\r\n\tdocument.body.appendChild(bigImg);\r\n\r\n\tfunction closeBigImg(e) {\r\n\t\tif (!e.target.closest('.bigImgWrap')) {\r\n\t\t\tdocument.body.removeChild(bigImg);\r\n\t\t\tdocument.body.removeChild(layer);\r\n\t\t\tconst scrollY = document.body.style.top;\r\n\t\t\tdocument.body.style.position = '';\r\n\t\t\tdocument.body.style.top = '';\r\n\t\t\twindow.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n\t\t\tdocument.removeEventListener('click', closeBigImg);\r\n\t\t};\r\n\t};\r\n\r\n\tsetTimeout(() => document.addEventListener('click', closeBigImg), 10);\r\n};\r\n\r\n// document.addEventListener('DOMContentLoaded', () => {\r\n//     new VideoGallery(\".header__video\"); \r\n//     new GalleryWithControls('.popularTrips');\r\n//     new Gallery('.tile-grid');\r\n//     new GalleryWithControls('.reviews');\r\n// });"],"names":["Gallery","selector","this","gallery","document","querySelector","galleryItems","Array","from","children","galleryScroll","bind","pointerUp","cancelDraggable","setGalleryScrollable","forEach","item","classList","contains","addEventListener","showBigImg","ondragstart","pageX","e","scrollLeft","event","Event","bubbles","dispatchEvent","style","pointerEvents","removeEventListener","VideoGallery","bigVideoClickHandler","bigVideoPointerHandler","setItemsClickable","video","which","setBigVideo","bigVideoContainer","getElementById","content","cloneNode","firstElementChild","bigVideoLayer","querySelectorAll","videoSources","url","currentTarget","dataset","id","firstChild","removeChild","call","source","src","replace","appendChild","body","getBigVideoPlay","bigVideo","target","closest","pause","remove","add","play","timer","setTimeout","clearTimeout","GalleryWithControls","galleryItemsLinks","createControls","after","controlsContainer","btnPrev","parentNode","btnNext","progressbarPoiner","setControlsState","btn","btnsClickHandler","svgNS","linkNS","createElement","slice","btns","createElementNS","btnPrevUse","setAttributeNS","append","btnNextUse","progressbar","scrollWidth","offsetWidth","width","galleryItemWidth","parseFloat","window","getComputedStyle","galleryItemMargin","marginRight","shift","animateMoving","step","currentShift","startTime","performance","now","requestAnimationFrame","animate","time","progress","render","scrollY","img","name","bigImg","imgSrcArr","split","length","className","layer","closeBigImg","top","position","scrollTo","parseInt"],"sourceRoot":""}